import{n as p,e as i,i as d,m as u}from"./index.89f1e795.js";import{E as m}from"./ErrorBox.c649daf0.js";var h=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"flag"},[t("error-box",{attrs:{error:e.error}},e._l(e.events,function(n,r){var o=n.attacker,a=n.victim,_=n.task,v=n.delta;return t("div",{key:r},[t("span",{staticClass:"mark"},[e._v(e._s(o))]),e._v(" stole a flag from "),t("span",{staticClass:"mark"},[e._v(e._s(a))]),e._v("'s service "),t("span",{staticClass:"mark"},[e._v(e._s(_))]),e._v(" and got "),t("span",{staticClass:"mark"},[e._v(e._s(v))]),e._v(" points ")])}),0)],1)},w=[];const f={components:{ErrorBox:m},data:function(){return{error:null,server:null,teams:null,tasks:null,events:[]}},created:async function(){try{const{data:s}=await this.$http.get(`${i}/api/client/teams/`),{data:t}=await this.$http.get(`${i}/api/client/tasks/`);this.teams=s,this.tasks=t}catch(s){console.error("Fetching data:",s),this.error="Can't connect to server";return}let e=0;this.server=d(`${i}/live_events`,{forceNew:!0,transports:["websocket","polling"]}),this.server.on("connect_error",s=>{this.server.io.opts.transports=["polling","websockets"],e>0&&(console.error("Connection error:",s.message),this.error="Can't connect to server"),e+=1}),this.server.on("flag_stolen",({data:s})=>{this.error=null;const{attacker_id:t,victim_id:n,task_id:r,attacker_delta:o}=s;this.events.unshift({attacker:this.teams.filter(({id:a})=>a===t)[0].name,victim:this.teams.filter(({id:a})=>a===n)[0].name,task:this.tasks.filter(({id:a})=>a==r)[0].name,delta:o})})}},c={};var g=p(f,h,w,!1,k,"3e0bc0c4",null,null);function k(e){for(let s in c)this[s]=c[s]}var b=function(){return g.exports}(),y=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"screen"},[t("button",{staticClass:"ponies-toggle-btn",on:{click:e.togglePonies}},[e._v(" Toggle ponies! ")]),e.showPonies?t("iframe",{staticClass:"pony",attrs:{src:"https://panzi.github.io/Browser-Ponies/ponies-iframe.html#fadeDuration=500&volume=1&fps=25&speed=3&audioEnabled=false&dontSpeak=true&showFps=false&showLoadProgress=false&speakProbability=0.1&spawn.masked%20matterhorn=1&spawn.nightmare%20moon=1&spawn.princess%20cadance=1&spawn.princess%20cadance%20(teenager)=1&spawn.princess%20celestia=1&spawn.princess%20celestia%20(alternate%20filly)=1&spawn.princess%20celestia%20(filly)=1&spawn.princess%20luna=1&spawn.princess%20luna%20(filly)=1&spawn.princess%20luna%20(season%201)=1&spawn.princess%20twilight%20sparkle=1&spawn.queen%20chrysalis=1&spawn.roseluck=1&spawn.sapphire%20shores=1&spawn.screw%20loose=1&spawn.screwball=1&spawn.seabreeze=1&spawn.sheriff%20silverstar=1&spawn.shoeshine=1&spawn.shopkeeper=1&spawn.silver%20spoon=1&spawn.sindy=1&spawn.sir%20colton%20vines=1&spawn.slendermane=1&spawn.soigne%20folio=1&spawn.stella=1&spawn.sue%20pie=1&spawn.suri%20polomare=1&spawn.twist=1&spawn.walter=1&spawnRandom=1&paddock=false&grass=false",width:"640",height:"480",frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0",title:"pony"}}):e._e(),t("live-scoreboard")],1)},$=[];const C={components:{LiveScoreboard:b},computed:u(["showPonies"]),methods:{togglePonies:function(){this.$store.commit("togglePonies")}}},l={};var x=p(C,y,$,!1,S,"21c35158",null,null);function S(e){for(let s in l)this[s]=l[s]}var L=function(){return x.exports}();export{L as default};
